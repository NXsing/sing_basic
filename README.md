# Simple interactive novel generator. Basic project

SING. Базовый проект.

Демо-видео:

https://youtu.be/VKieqWdUf4A?t=30

Демка:

https://github.com/NXsing/sing_demo

## Для начала своего проекта
1. Скачать базовый проект, используя зеленую кнопку "Download" вверху справа, распаковать
2. Зайти в директорию, запустить index.html(для проверки работоспособности)
3. Редактируя main.py и периодически запуская make(который использует интерпретатор Python), генерируется файл HTML/_bytes.js, который содержит квест в байт-коде

## Требования
1. Модуль pickle для питона(`pip3 install pickle`)
2. Сам Python версии 3.5 и выше
3. Утилита make(пока что движок адаптирован для linux'а) `sudo apt-get install make`

## Об API

Питоновые функции движка:
```python
r([название комнаты]) # начало блока комнаты
t(текст, [условие], [команда]) # текст
a(текст, команда, [условие]) # действие
e() # заверешние блока комнаты
```
Как видите, движок очень прост.

Есть еще "умная" функция `x(текст, [команда/условие])`, которая сама, на основе формата аргументов, вызывает t() или a(). Это позволяет писать код побыстрее.

## Условия, команды

Основные:
```python
a("Взять книгу","set BOOK","ifset BOOK")
a("Взять книгу","unset BOOK","ifnot BOOK")
a("Идти дальше","goto комната2")
```

Можно комбинировать через ";":
```python
a("Взять книгу","set BOOK;unset HANDFREE;goto room4","ifset BOOK;ifnot VISITED4")
```

Алиасы:
```python
a("Идти дальше","next")
a("Идти дальше","return")
```

## О движке

Питоновые функции(r,t,a,e) генерируют структуры, которые потом конвертируются в байт-код.

Байт-код потом интерпретируется в браузере, используя javascript.

Можно реализовать интерпретатор байт-кода и на любой-другой платформе(всего 15 инструкций). Сам байт-код(пока что) сохраняется в два файла: _bytes.js и bytes.pick

Файл bytes.pick можно импортировать в Питоне:
```python
import pickle
mem=pickle.load( open( "SOURCE/_bytes.pick", "rb" ) ) # байт-код прочитан
```

# Генератор в QSP
При запуске Makefile, автоматически генерируется в том числе и файл qsp.txt.

Для того, чтобы получить файл квеста QSP, qsp.txt нужно передать утилите txt2gam:
```
txt2gam.exe qsp.txt game.qsp
```
Полученный файл game.qsp предназначен для запуска в QSP-плеере, его можно редактировать в программе QGen.

# todo

0. ~~Демонстрация~~
1. Видео по написанию простейшего квеста(использованию API, +multiline strings)
2. Видео по написанию алиасов(img, chain, yt)

## Контакты для связи

1. Почта: x_n хатико) ro.ru
2. NX на Discord-канале ifrus: https://discordapp.com/invite/X86kkzM
